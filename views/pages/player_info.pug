//- player-info.pug
include ../partials/header.pug
include ../partials/menu.pug

div.container
  br
  div.row
    div.col-4
      div.card
        //- TODO: Modify the pug code below to conditionally set the image_src

        if(id_name_year)
          img.card-img-top#player_img(src= '../../resources/img/player'+id_name_year.id+'.jpg', alt="Football Player")
        else
          img.card-img-top#player_img(src= '../../resources/img/helmet.jpg', alt="Football Player")

      
      
      div.card-body.mx-auto
        form.form(action="/player_info/select_player", method="get")
          select.custom-select(name="player_choice", onchange="this.form.submit()")
            option(selected) Select Player
            - if(id_name_result)
                for item in id_name_result
                  option(value=item.id) #{item.id} #{item.name}
            //- TODO: Populate the select with player options. Set the value to the player's id and display the player's name.
    div.col-8
      div.table-responsive
        table.table
          //- TODO: Set the player's information. On select, fill in the player's information in each of the field below. You will need to calculate the average rushing, receiving, and passing yards.
          if(id_name_year)
            tr
              th Year
              td= id_name_year.year
            tr
              th Major
              td= id_name_year.major
            tr
              th Games Played
              td= games_played_count.count
            tr
              td= 'Passing Yards: '+id_name_year.passing_yards 
              td= 'Avg. Passing Yards: '+id_name_year.passing_yards/games_played_count.count
            tr
              td= 'Rushing Yards: '+ id_name_year.rushing_yards
              td= 'Avg. Rushing Yards: '+ id_name_year.rushing_yards/games_played_count.count 
            tr
              td= 'Receiving Yards: '+ id_name_year.receiving_yards
              td= 'Avg. Receiving Yards: ' + id_name_year.receiving_yards/games_played_count.count 
          else
            tr
              th Year
              td ?
            tr
              th Major
              td ?
            tr
              th Games Played
              td ?
            tr
              td Passing Yards:
              td Avg. Passing Yards:
            tr
              td Rushing Yards: 
              td Avg. Rushing Yards:
            tr
              td Receiving Yards:
              td Avg. Receiving Yards:

include ../partials/footer.pug